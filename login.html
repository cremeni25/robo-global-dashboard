<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<title>Robô Global — Acesso Restrito</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
body{
  margin:0;font-family:system-ui;background:#020617;color:#e5e7eb;
  display:flex;align-items:center;justify-content:center;height:100vh;
}
.card{
  background:#020617;border:1px solid #1e293b;border-radius:16px;
  padding:28px;width:360px;
}
h1{margin:0 0 12px;font-size:20px}
input{
  width:100%;padding:12px;border-radius:10px;border:1px solid #1e293b;
  background:#020617;color:#e5e7eb;margin:10px 0;
}
button{
  width:100%;padding:12px;border-radius:10px;border:none;
  background:#38bdf8;color:#000;font-weight:600;cursor:pointer;
}
.msg{margin-top:10px;font-size:13px}
.ok{color:#22c55e}.err{color:#ef4444}
</style>
</head>
<body>

<div class="card">
  <h1>Acesso Restrito</h1>
  <p style="color:#94a3b8;font-size:14px">
    Área sensível do Robô Global.<br/>Somente usuários autorizados.
  </p>

  <input id="key" type="password" placeholder="Chave de acesso"/>
  <button onclick="login()">Entrar</button>
  <div id="msg" class="msg"></div>
</div>

<script>
const API="https://robo-global-api-v2.onrender.com";

async function login(){
  const key=document.getElementById("key").value;
  const msg=document.getElementById("msg");
  msg.innerHTML="";

  try{
    const r=await fetch(API+"/dashboard/fase3/overview",{
      headers:{"X-FINANCEIRO-API-KEY":key}
    });

    if(!r.ok) throw new Error();

    sessionStorage.setItem("RG_AUTH","OK");
    sessionStorage.setItem("RG_KEY",key);
    window.location.href="/secure/";
  }catch{
    msg.innerHTML="<span class='err'>Acesso negado</span>";
  }
}
</script>

</body>
</html>
