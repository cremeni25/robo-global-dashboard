<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Robô Global — Sistema Operacional de Inteligência</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <style>
    :root{
      --bg:#020617;
      --panel:#020617;
      --border:#1e293b;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#38bdf8;
      --ok:#22c55e;
      --warn:#facc15;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont;
      background:radial-gradient(circle at top,#020617,#000);
      color:var(--text);
    }

    header{
      padding:40px;
      border-bottom:1px solid var(--border);
    }

    header h1{
      margin:0;
      font-size:28px;
    }

    header p{
      margin-top:8px;
      color:var(--muted);
      max-width:720px;
    }

    main{
      padding:40px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:24px;
    }

    .card{
      background:linear-gradient(180deg,#020617,#000);
      border:1px solid var(--border);
      border-radius:18px;
      padding:24px;
    }

    .card h2{
      margin:0 0 14px;
      font-size:18px;
    }

    .value{
      font-size:16px;
      margin-bottom:6px;
    }

    .muted{
      font-size:14px;
      color:var(--muted);
    }

    .status-ok{color:var(--ok)}
    .status-warn{color:var(--warn)}

    footer{
      padding:28px 40px;
      border-top:1px solid var(--border);
      font-size:12px;
      color:var(--muted);
    }
  </style>
</head>

<body>

<header>
  <h1>Robô Global</h1>
  <p>
    Sistema operacional de inteligência econômica.
    Este site representa a camada institucional e operacional pública do robô.
    Dados sensíveis e controle humano residem em áreas protegidas.
  </p>
</header>

<main>

  <!-- BLOCO INSTITUCIONAL -->
  <section class="card">
    <h2>O que é o Robô Global</h2>
    <p class="muted">
      O Robô Global é um organismo operacional de inteligência,
      projetado para observar, analisar e executar decisões econômicas
      sob governança humana.
    </p>
    <p class="muted">
      Ele opera de forma modular, auditável e extensível,
      sem dependência de uma única fonte de receita ou plataforma.
    </p>
  </section>

  <!-- STATUS OPERACIONAL -->
  <section class="card">
    <h2>Status Operacional</h2>
    <div class="value status-ok" id="estadoSistema">Carregando…</div>
    <div class="muted" id="mensagemSistema"></div>
  </section>

  <!-- INTENÇÃO ATUAL -->
  <section class="card">
    <h2>Intenção Atual do Robô</h2>
    <div class="value" id="intencaoAtual">Carregando…</div>
    <div class="muted">
      Leitura pública da orientação estratégica atual.
    </div>
  </section>

  <!-- FASES ATIVAS -->
  <section class="card">
    <h2>Fases Ativas</h2>
    <ul id="fasesAtivas" class="muted">
      <li>Carregando…</li>
    </ul>
  </section>

  <!-- CAPACIDADES -->
  <section class="card">
    <h2>Capacidades Ativas</h2>
    <ul class="muted">
      <li>Governança humana</li>
      <li>Dashboard executivo</li>
      <li>Monitoramento de mídia</li>
      <li>Registro institucional</li>
    </ul>
  </section>

  <!-- PLATAFORMAS HABILITADAS -->
  <section class="card">
    <h2>Plataformas Habilitadas</h2>
    <ul id="plataformasAtivas" class="muted">
      <li>Carregando…</li>
    </ul>
  </section>

</main>

<footer>
  Robô Global • Camada institucional e operacional pública • Leitura não sensível
</footer>

<script>
  const API = "https://robo-global-api-v2.onrender.com";

  async function carregarStatus() {
    try {
      const res = await fetch(API + "/dashboard/status");
      const d = await res.json();

      document.getElementById("estadoSistema").innerText = d.estado_geral;
      document.getElementById("mensagemSistema").innerText = d.mensagem;
      document.getElementById("intencaoAtual").innerText = d.intencao_atual;

      const fases = document.getElementById("fasesAtivas");
      fases.innerHTML = "";
      fases.innerHTML += "<li>Observação operacional ativa</li>";
      fases.innerHTML += "<li>Meta Ads em acompanhamento</li>";

    } catch (e) {
      document.getElementById("estadoSistema").innerText = "INDETERMINADO";
      document.getElementById("mensagemSistema").innerText =
        "Falha ao consultar estado do robô";
    }
  }

  async function carregarPlataformas() {
    try {
      const res = await fetch(API + "/dashboard/fontes");
      const d = await res.json();
      const ul = document.getElementById("plataformasAtivas");
      ul.innerHTML = "";

      if (!d.fontes_ativas || d.fontes_ativas.length === 0) {
        ul.innerHTML = "<li>Nenhuma plataforma habilitada</li>";
        return;
      }

      d.fontes_ativas.forEach(p => {
        const li = document.createElement("li");
        li.textContent = p;
        ul.appendChild(li);
      });

    } catch {
      document.getElementById("plataformasAtivas").innerHTML =
        "<li>Indisponível</li>";
    }
  }

  carregarStatus();
  carregarPlataformas();
</script>

</body>
</html>
