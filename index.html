<!-- HISTÓRICO OPERACIONAL -->
<div class="card">
  <h2>Histórico Operacional</h2>
  <pre id="historico">Carregando histórico…</pre>
</div>

<script>
async function carregarHistorico() {
  try {
    const res = await fetch(API_BASE + "/historico-operacional", { cache:"no-store" });
    const data = await res.json();
    if (!data.length) {
      document.getElementById("historico").innerText = "Nenhuma execução registrada.";
      return;
    }
    document.getElementById("historico").innerText =
      data.map(h =>
        `[${h.data_hora}]
Tipo: ${h.tipo_execucao}
Plataforma: ${h.plataforma}
Proposta: ${h.proposta_id}
Status: ${h.status}
Origem: ${h.origem}\n`
      ).join("\n");
  } catch {
    document.getElementById("historico").innerText = "Erro ao carregar histórico.";
  }
}
</script>
